<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Qdrant Dashboard - TurkLawAI</title>
    <link rel="stylesheet" href="/static/css/dashboard.css?v=20251001-5">
</head>
<body class="light-theme">

    <!-- Login Overlay -->
    <div id="login-overlay" class="login-overlay">
        <div class="login-box">
            <h2>üîê Qdrant Dashboard</h2>
            <p>L√ºtfen giri≈ü yapƒ±n</p>
            <form id="login-form">
                <input type="text" id="username-input" placeholder="Kullanƒ±cƒ± adƒ±" value="admin" required>
                <input type="password" id="password-input" placeholder="≈ûifre giriniz" required>
                <button type="submit">Giri≈ü Yap</button>
                <p id="login-error" class="error-message"></p>
            </form>
        </div>
    </div>

    <!-- Main Dashboard -->
    <div class="site-wrap">

        <!-- Sidebar Navigation -->
        <nav class="site-nav">
            <div class="name">
                TurkLawAI
                <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                    <path d="M12,2A10,10 0 0,1 22,12A10,10 0 0,1 12,22A10,10 0 0,1 2,12A10,10 0 0,1 12,2M12,4A8,8 0 0,0 4,12A8,8 0 0,0 12,20A8,8 0 0,0 20,12A8,8 0 0,0 12,4M12,6A6,6 0 0,1 18,12A6,6 0 0,1 12,18A6,6 0 0,1 6,12A6,6 0 0,1 12,6Z"></path>
                </svg>
            </div>

            <ul>
                <li class="active">
                    <a href="#dashboard" data-page="dashboard">üìä Dashboard</a>
                </li>
                <li>
                    <a href="#customers" data-page="customers">üë• M√º≈üteriler</a>
                </li>
                <li>
                    <a href="#collections" data-page="collections">üì¶ Collections</a>
                </li>
                <li>
                    <a href="#status" data-page="status">üíö Sistem Durumu</a>
                </li>
                <li>
                    <a href="#logs" data-page="logs">üìã Loglar</a>
                </li>
                <li>
                    <a href="#settings" data-page="settings">‚öôÔ∏è Ayarlar</a>
                </li>
            </ul>

            <div class="note">
                <h3>Qdrant Vector DB</h3>
                <p>VPS √ºzerinde Coolify ile √ßalƒ±≈üan Qdrant instance y√∂netim paneli.</p>
                <div class="theme-toggle">
                    <button id="theme-toggle-btn">
                        <span id="theme-icon">üåô</span>
                        <span id="theme-text">Gece Modu</span>
                    </button>
                </div>
            </div>

            <button id="logout-btn" class="logout-btn">üö™ √áƒ±kƒ±≈ü Yap</button>
        </nav>

        <!-- Main Content -->
        <main>
            <header>
                <div class="breadcrumbs">
                    <a href="#dashboard">Ana Sayfa</a> / <span id="current-page">Dashboard</span>
                </div>

                <h1 class="title" id="page-title">Qdrant Dashboard</h1>

                <div class="header-actions">
                    <div class="status-badge" id="qdrant-status">
                        <span class="status-dot"></span>
                        <span class="status-text">Baƒülanƒ±yor...</span>
                    </div>
                    <button id="refresh-btn" class="action-btn">üîÑ Yenile</button>
                </div>
            </header>

            <!-- Dashboard Content -->
            <div id="content-area" class="content-area">

                <!-- Dashboard Page -->
                <div id="page-dashboard" class="page-content active">
                    <div class="stats-grid">
                        <div class="stat-card">
                            <div class="stat-icon">üì¶</div>
                            <div class="stat-info">
                                <h3>Collection Sayƒ±sƒ±</h3>
                                <p class="stat-value" id="stat-collections">-</p>
                            </div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon">üìÑ</div>
                            <div class="stat-info">
                                <h3>Toplam Vekt√∂r</h3>
                                <p class="stat-value" id="stat-vectors">-</p>
                            </div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon">üíæ</div>
                            <div class="stat-info">
                                <h3>Bellek Kullanƒ±mƒ±</h3>
                                <p class="stat-value" id="stat-memory">-</p>
                            </div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon">‚ö°</div>
                            <div class="stat-info">
                                <h3>Sistem Durumu</h3>
                                <p class="stat-value" id="stat-status">-</p>
                            </div>
                        </div>
                    </div>

                    <div class="info-panel">
                        <h2>üîó Baƒülantƒ± Bilgileri</h2>
                        <div class="info-row">
                            <strong>Qdrant URL:</strong>
                            <code id="qdrant-url">https://qdrant.turklawai.com</code>
                        </div>
                        <div class="info-row">
                            <strong>Versiyon:</strong>
                            <span id="qdrant-version">-</span>
                        </div>
                    </div>
                </div>

                <!-- Customers Page -->
                <div id="page-customers" class="page-content">
                    <div class="customers-header">
                        <div class="customers-stats">
                            <div class="stat-mini">
                                <strong id="total-customers-count">0</strong>
                                <span>Toplam M√º≈üteri</span>
                            </div>
                            <div class="stat-mini">
                                <strong id="active-customers-count">0</strong>
                                <span>Aktif M√º≈üteri</span>
                            </div>
                            <div class="stat-mini">
                                <strong id="total-documents-count">0</strong>
                                <span>Toplam Belge</span>
                            </div>
                            <div class="stat-mini">
                                <strong id="total-usage-mb">0 MB</strong>
                                <span>Toplam Kullanƒ±m</span>
                            </div>
                        </div>
                        <button id="create-customer-btn" class="action-btn">‚ûï Yeni M√º≈üteri</button>
                    </div>
                    <div id="customers-list" class="customers-list">
                        <p class="loading-text">M√º≈üteriler y√ºkleniyor...</p>
                    </div>
                </div>

                <!-- Collections Page -->
                <div id="page-collections" class="page-content">
                    <div class="collections-header">
                        <button id="create-collection-btn" class="action-btn">‚ûï Yeni Collection</button>
                    </div>
                    <div id="collections-list" class="collections-list">
                        <p class="loading-text">Collection'lar y√ºkleniyor...</p>
                    </div>
                </div>

                <!-- Status Page -->
                <div id="page-status" class="page-content">
                    <div class="status-panel">
                        <h2>üíö Sistem Saƒülƒ±k Durumu</h2>
                        <div id="health-info" class="health-info">
                            <p class="loading-text">Sistem bilgileri y√ºkleniyor...</p>
                        </div>
                    </div>
                </div>

                <!-- Logs Page -->
                <div id="page-logs" class="page-content">
                    <div class="logs-panel">
                        <h2>üìã Son ƒ∞≈ülemler</h2>
                        <div id="logs-container" class="logs-container">
                            <p class="log-entry">Dashboard ba≈ülatƒ±ldƒ±...</p>
                        </div>
                    </div>
                </div>

                <!-- Settings Page -->
                <div id="page-settings" class="page-content">
                    <div class="settings-panel">
                        <h2>‚öôÔ∏è Ayarlar</h2>
                        <form id="settings-form">
                            <div class="form-group">
                                <label for="qdrant-endpoint">Qdrant Endpoint URL</label>
                                <input type="url" id="qdrant-endpoint" value="https://qdrant.turklawai.com" disabled>
                            </div>
                            <div class="form-group">
                                <label for="auto-refresh">Otomatik Yenileme (saniye)</label>
                                <input type="number" id="auto-refresh" value="30" min="10" max="300">
                            </div>
                            <div class="form-group">
                                <label>
                                    <input type="checkbox" id="notifications-enabled" checked>
                                    Bildirimler Etkin
                                </label>
                            </div>
                            <button type="button" id="change-password-btn" class="action-btn">üîë ≈ûifre Deƒüi≈ütir</button>
                        </form>
                    </div>
                </div>

            </div>
        </main>

    </div>

    <!-- Create Customer Modal -->
    <div id="create-customer-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>‚ûï Yeni M√º≈üteri Ekle</h2>
                <button class="close-modal" onclick="closeCreateCustomerModal()">&times;</button>
            </div>
            <form id="create-customer-form">
                <div class="form-group">
                    <label for="customer-name">M√º≈üteri Adƒ± *</label>
                    <input type="text" id="customer-name" placeholder="√ñrnek: volkan" required>
                    <small>Collection adƒ± otomatik olu≈üturulacak: {ad}_document</small>
                </div>
                <div class="form-group">
                    <label for="customer-email">Email *</label>
                    <input type="email" id="customer-email" placeholder="ornek@email.com" required>
                </div>
                <div class="form-group">
                    <label for="customer-quota">Kota (MB) *</label>
                    <input type="number" id="customer-quota" value="100" min="10" max="10000" required>
                    <small>M√º≈üteriye tahsis edilecek depolama alanƒ±</small>
                </div>
                <div class="form-group">
                    <label>Collection Adƒ± (Otomatik)</label>
                    <div id="collection-name-preview" style="padding: 8px; background: #f5f5f5; border-radius: 4px; font-family: monospace; color: #666;">
                        {ad}_document
                    </div>
                    <small>M√º≈üteri adƒ± girildiƒüinde otomatik g√∂sterilecek</small>
                </div>
                <div class="modal-actions">
                    <button type="button" class="btn-secondary" onclick="closeCreateCustomerModal()">ƒ∞ptal</button>
                    <button type="submit" class="btn-primary">M√º≈üteri Olu≈ütur</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Upload Document Modal -->
    <div id="upload-document-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>üì§ Belge Y√ºkle</h2>
                <button class="close-modal" onclick="closeUploadModal()">&times;</button>
            </div>
            <form id="upload-document-form">
                <input type="hidden" id="upload-customer-id">
                <div class="customer-info" id="upload-customer-info">
                    <h3 id="upload-customer-name"></h3>
                    <p>Kalan Kota: <strong id="upload-remaining-quota"></strong></p>
                </div>
                <div class="form-group">
                    <label for="document-file">Dosya Se√ß *</label>
                    <input type="file" id="document-file" accept=".pdf,.txt,.doc,.docx" required>
                    <small>Desteklenen formatlar: PDF, TXT, DOC, DOCX</small>
                </div>
                <div class="form-group">
                    <label for="document-description">A√ßƒ±klama (Opsiyonel)</label>
                    <textarea id="document-description" rows="3" placeholder="Belge hakkƒ±nda not..."></textarea>
                </div>
                <div class="modal-actions">
                    <button type="button" class="btn-secondary" onclick="closeUploadModal()">ƒ∞ptal</button>
                    <button type="submit" class="btn-primary">Y√ºkle</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Google Drive Upload Modal -->
    <div id="gdrive-upload-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>üì§ Google Drive'dan Dosya Y√ºkle</h2>
                <button class="close-modal" onclick="closeGDriveUploadModal()">&times;</button>
            </div>
            <form id="gdrive-upload-form">
                <div class="form-group">
                    <label for="gdrive-file-id">Google Drive File ID *</label>
                    <input type="text" id="gdrive-file-id" placeholder="1abc...xyz" required>
                    <small>URL formatƒ±: https://drive.google.com/file/d/<strong>FILE_ID</strong>/view</small>
                </div>
                <div class="form-group">
                    <label for="gdrive-file-name">Dosya Adƒ± *</label>
                    <input type="text" id="gdrive-file-name" placeholder="belge.pdf" required>
                    <small>Desteklenen: .pdf, .txt, .docx, .doc</small>
                </div>
                <div class="form-group">
                    <label for="gdrive-customer-id">M√º≈üteri *</label>
                    <select id="gdrive-customer-id" required>
                        <option value="">M√º≈üteri se√ßin...</option>
                    </select>
                </div>
                <div id="upload-progress" class="upload-progress" style="display: none;">
                    <div class="progress-bar">
                        <div class="progress-fill"></div>
                    </div>
                    <p class="progress-text">Y√ºkleniyor...</p>
                </div>
                <div id="upload-result" class="upload-result" style="display: none;"></div>
                <div class="modal-actions">
                    <button type="button" class="btn-secondary" onclick="closeGDriveUploadModal()">ƒ∞ptal</button>
                    <button type="submit" class="btn-primary" id="gdrive-upload-btn">Y√ºkle</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Create Collection Modal -->
    <div id="create-collection-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>‚ûï Yeni Collection Olu≈ütur</h2>
                <button class="close-modal" onclick="closeCreateCollectionModal()">&times;</button>
            </div>
            <form id="create-collection-form">
                <div class="form-group">
                    <label for="collection-name">Collection Adƒ± *</label>
                    <input type="text" id="collection-name" placeholder="ornek: legal_documents" required>
                </div>
                <div class="form-group">
                    <label for="vector-size">Vekt√∂r Boyutu *</label>
                    <input type="number" id="vector-size" value="1536" min="1" max="4096" required>
                    <small>Yaygƒ±n deƒüerler: 384, 768, 1536, 3072</small>
                </div>
                <div class="form-group">
                    <label for="distance-metric">Mesafe Metriƒüi *</label>
                    <select id="distance-metric" required>
                        <option value="Cosine">Cosine</option>
                        <option value="Euclid">Euclid</option>
                        <option value="Dot">Dot Product</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>
                        <input type="checkbox" id="on-disk-payload">
                        On-Disk Payload (B√ºy√ºk collection'lar i√ßin)
                    </label>
                </div>
                <div class="modal-actions">
                    <button type="button" class="btn-secondary" onclick="closeCreateCollectionModal()">ƒ∞ptal</button>
                    <button type="submit" class="btn-primary">Olu≈ütur</button>
                </div>
            </form>
        </div>
    </div>

    <script src="/static/js/mock-data.js?v=20251001-5"></script>
    <script src="/static/js/dashboard.js?v=20251001-5"></script>
    <script src="/static/js/customers.js?v=20251001-5"></script>
</body>
</html>
